{
  "$schema": "https://raw.githubusercontent.com/Azure/enterprise-azure-policy-as-code/main/Schemas/policy-assignment-schema.json",
  "nodeName": "/root",
  "definitionEntry": {
    "policySetName": "Alerting-LoadBalancing",
    "displayName": "Deploy Azure Monitor Baseline Alerts for Load Balancing",
    "nonComplianceMessages": [
      {
        "policyDefinitionReferenceId": null,
        "message": "Alerting must be deployed to Azure services."
      }
    ]
  },
  "assignment": {
    "name": "Deploy-AMBA-LoadBalance",
    "displayName": "Deploy Azure Monitor Baseline Alerts for Load Balancing",
    "description": "This initiative deploys Azure Monitor Baseline Alerts to monitor Load Balancing Services such as Load Balancer, Application Gateway, Traffic Manager, and Azure Front Door."
  },
  "metadata": {
    "_deployed_by_amba": true
  },
  "parameters": {
    "AGWApplicationGatewayTotalTimeEvaluationFrequency": "PT1M",
    "AGWBackendLastByteResponseTimeAlertSeverity": "2",
    "AGWCapacityUnitsAlertSeverity": "2",
    "PIPDDoSAttackAlertState": "true",
    "CDNPPercentage5XXAlertState": "true",
    "TMEndpointHealthWindowSize": "PT5M",
    "AGWCPUUtilAlertSeverity": "2",
    "TMEndpointHealthAlertSeverity": "2",
    "CDNPOriginHealthPercentageEvaluationFrequency": "PT1M",
    "LBHealthProbeStatusPolicyEffect": "deployIfNotExists",
    "LBGlobalBackendAvailabilityWindowSize": "PT5M",
    "CDNPOriginLatencyWindowSize": "PT5M",
    "VNETDDOSAttackPolicyEffect": "deployIfNotExists",
    "CDNPPercentage5XXPolicyEffect": "deployIfNotExists",
    "AGWFailedRequestsPolicyEffect": "deployIfNotExists",
    "LBGlobalBackendAvailabilityAlertSeverity": "0",
    "LBDatapathAvailabilityAlertSeverity": "0",
    "FDBackendRequestLatencyWindowSize": "PT5M",
    "AGWBackendLastByteResponseTimeEvaluationFrequency": "PT1M",
    "LBHealthProbeStatusWindowSize": "PT5M",
    "AGWBackendLastByteResponseTimeWindowSize": "PT5M",
    "AGWComputeUnitsAlertSeverity": "2",
    "AGWFailedRequestsEvaluationFrequency": "PT1M",
    "CDNPOriginLatencyEvaluationFrequency": "PT1M",
    "VNETDDOSAttackAlertState": "true",
    "TMEndpointHealthAlertState": "true",
    "PIPPacketsInDDoSThreshold": "40000",
    "TMEndpointHealthPolicyEffect": "deployIfNotExists",
    "AGWFailedRequestsAlertSeverity": "2",
    "AGWApplicationGatewayTotalTimeWindowSize": "PT5M",
    "FDBackendHealthAlertSeverity": "2",
    "LBDatapathAvailabilityPolicyEffect": "deployIfNotExists",
    "VNETDDOSAttackEvaluationFrequency": "PT1M",
    "LBHealthProbeStatusEvaluationFrequency": "PT1M",
    "PIPPacketsInDDoSAlertState": "true",
    "FDBackendRequestLatencyEvaluationFrequency": "PT1M",
    "PIPVIPAvailabilityAlertState": "true",
    "AGWCPUUtilAlertState": "true",
    "CDNPPercentage4XXWindowSize": "PT5M",
    "FDBackendHealthAlertState": "true",
    "PIPVIPAvailabilityWindowSize": "PT5M",
    "ALZMonitorDisableTagValues": [
      "true",
      "Test",
      "Dev",
      "Sandbox"
    ],
    "LBUsedSNATPortsPolicyEffect": "deployIfNotExists",
    "CDNPPercentage5XXWindowSize": "PT5M",
    "FDBackendRequestLatencyPolicyEffect": "deployIfNotExists",
    "PIPVIPAvailabilityAlertSeverity": "1",
    "AGWResponseStatusEvaluationFrequency": "PT1M",
    "AGWFailedRequestsAlertSensitivity": "Medium",
    "VNETDDOSAttackThreshold": "1",
    "LBUsedSNATPortsAlertSeverity": "1",
    "AGWCapacityUnitsWindowSize": "PT5M",
    "PIPPacketsInDDoSWindowSize": "PT5M",
    "FDBackendRequestLatencyAlertState": "true",
    "AGWCPUUtilEvaluationFrequency": "PT1M",
    "AGWComputeUnitsAlertState": "true",
    "PIPPacketsInDDoSEvaluationFrequency": "PT5M",
    "AGWCapacityUnitsAlertState": "true",
    "AGWUnhealthyHostCountAlertState": "true",
    "CDNPPercentage5XXEvaluationFrequency": "PT1M",
    "AGWComputeUnitsPolicyEffect": "deployIfNotExists",
    "CDNPOriginHealthPercentagePolicyEffect": "deployIfNotExists",
    "AGWCapacityUnitsEvaluationFrequency": "PT1M",
    "AGWUnhealthyHostCountAlertSeverity": "2",
    "AGWUnhealthyHostCountEvaluationFrequency": "PT1M",
    "PIPPacketsInDDoSPolicyEffect": "disabled",
    "AGWResponseStatusAlertState": "true",
    "AGWUnhealthyHostCountPolicyEffect": "deployIfNotExists",
    "AGWFailedRequestsWindowSize": "PT5M",
    "PIPDDoSAttackAlertSeverity": "1",
    "LBDatapathAvailabilityWindowSize": "PT5M",
    "AGWCPUUtilPolicyEffect": "deployIfNotExists",
    "PIPVIPAvailabilityPolicyEffect": "deployIfNotExists",
    "LBGlobalBackendAvailabilityAlertState": "true",
    "LBGlobalBackendAvailabilityPolicyEffect": "deployIfNotExists",
    "PIPPacketsInDDoSAlertSeverity": "4",
    "PIPBytesInDDoSAlertState": "true",
    "PIPVIPAvailabilityEvaluationFrequency": "PT1M",
    "VNETDDOSAttackAlertSeverity": "1",
    "AGWCPUUtilWindowSize": "PT5M",
    "AGWApplicationGatewayTotalTimeAlertState": "true",
    "PIPDDoSAttackThreshold": "0",
    "LBUsedSNATPortsAlertState": "true",
    "AGWFailedRequestsAlertState": "true",
    "PIPBytesInDDoSEvaluationFrequency": "PT5M",
    "AGWComputeUnitsEvaluationFrequency": "PT1M",
    "LBDatapathAvailabilityAlertState": "true",
    "CDNPOriginLatencyAlertState": "true",
    "FDBackendRequestLatencyAlertSeverity": "2",
    "CDNPOriginLatencyPolicyEffect": "disabled",
    "AGWResponseStatusPolicyEffect": "deployIfNotExists",
    "FDBackendHealthPolicyEffect": "deployIfNotExists",
    "AGWResponseStatusAlertSensitivity": "Medium",
    "PIPDDoSAttackPolicyEffect": "deployIfNotExists",
    "CDNPPercentage4XXAlertState": "true",
    "LBHealthProbeStatusAlertSeverity": "2",
    "FDBackendHealthEvaluationFrequency": "PT1M",
    "CDNPPercentage4XXPolicyEffect": "deployIfNotExists",
    "VNETDDOSAttackWindowSize": "PT5M",
    "PIPBytesInDDoSThreshold": "8000000",
    "LBHealthProbeStatusAlertState": "true",
    "AGWComputeUnitsWindowSize": "PT5M",
    "AGWBackendLastByteResponseTimePolicyEffect": "deployIfNotExists",
    "CDNPPercentage4XXEvaluationFrequency": "PT1M",
    "AGWResponseStatusWindowSize": "PT5M",
    "CDNPOriginHealthPercentageAlertState": "true",
    "AGWCapacityUnitsPolicyEffect": "deployIfNotExists",
    "AGWApplicationGatewayTotalTimeAlertSensitivity": "Medium",
    "CDNPOriginLatencyAlertSeverity": "2",
    "LBUsedSNATPortsEvaluationFrequency": "PT1M",
    "LBGlobalBackendAvailabilityEvaluationFrequency": "PT1M",
    "AGWResponseStatusAlertSeverity": "2",
    "PIPDDoSAttackEvaluationFrequency": "PT5M",
    "LBUsedSNATPortsWindowSize": "PT5M",
    "CDNPPercentage5XXAlertSeverity": "2",
    "FDBackendHealthWindowSize": "PT5M",
    "PIPBytesInDDoSAlertSeverity": "4",
    "CDNPOriginHealthPercentageWindowSize": "PT5M",
    "LBDatapathAvailabilityEvaluationFrequency": "PT1M",
    "PIPBytesInDDoSPolicyEffect": "disabled",
    "PIPDDoSAttackWindowSize": "PT5M",
    "AGWApplicationGatewayTotalTimePolicyEffect": "deployIfNotExists",
    "AGWBackendLastByteResponseTimeAlertSensitivity": "Medium",
    "PIPVIPAvailabilityThreshold": "1",
    "ALZMonitorDisableTagName": "MonitorDisable",
    "AGWApplicationGatewayTotalTimeAlertSeverity": "2",
    "CDNPOriginHealthPercentageAlertSeverity": "2",
    "TMEndpointHealthEvaluationFrequency": "PT1M",
    "PIPBytesInDDoSWindowSize": "PT5M",
    "AGWBackendLastByteResponseTimeAlertState": "true",
    "CDNPPercentage4XXAlertSeverity": "2",
    "AGWUnhealthyHostCountWindowSize": "PT5M"
  },
  "scope": {
    "amba": [
      "/providers/Microsoft.Management/managementGroups/amba-landingzones"
    ]
  }
}