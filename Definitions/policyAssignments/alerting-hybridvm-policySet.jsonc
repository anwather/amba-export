{
  "$schema": "https://raw.githubusercontent.com/Azure/enterprise-azure-policy-as-code/main/Schemas/policy-assignment-schema.json",
  "nodeName": "/root",
  "definitionEntry": {
    "policySetName": "Alerting-HybridVM",
    "displayName": "Deploy Azure Monitor Baseline Alerts for Hybrid VMs",
    "nonComplianceMessages": [
      {
        "policyDefinitionReferenceId": null,
        "message": "Alerting must be deployed to Azure services."
      }
    ]
  },
  "assignment": {
    "name": "Deploy-AMBA-HybridVM",
    "displayName": "Deploy Azure Monitor Baseline Alerts for Hybrid VMs",
    "description": "Initiative to deploy AMBA Hybrid VM alerts"
  },
  "metadata": {
    "_deployed_by_amba": true
  },
  "parameters": {
    "hybridVMDataDiskSpaceEvaluationFrequency": "PT5M",
    "hybridVMOSDiskWriteLatencyEvaluationFrequency": "PT5M",
    "hybridVMDataDiskSpaceWindowSize": "PT15M",
    "hybridVMDataDiskWriteLatencyOperator": "LessThan",
    "hybridVMDataDiskReadLatencyEvaluationPeriods": "1",
    "hybridVMOSDiskSpacePolicyEffect": "deployIfNotExists",
    "hybridVMDisconnectedAlertAutoMitigate": "false",
    "hybridVMOSDiskReadLatencyAlertSeverity": "2",
    "hybridVMDisconnectedAlertPolicyEffect": "deployIfNotExists",
    "hybridVMNetworkOutThreshold": "10000000",
    "hybridVMDataDiskWriteLatencyEvaluationPeriods": "1",
    "hybridVMDataDiskWriteLatencyAutoResolveTime": "00:10:00",
    "byoUserAssignedManagedIdentityResourceId": "",
    "hybridVMDisconnectedAlertEvaluationPeriods": "1",
    "hybridVMDataDiskWriteLatencyPolicyEffect": "deployIfNotExists",
    "hybridVMOSDiskReadLatencyAutoMitigate": "true",
    "hybridVMPercentMemoryEvaluationFrequency": "PT5M",
    "hybridVMHeartBeatRGPolicyEffect": "deployIfNotExists",
    "hybridVMHeartBeatRGAutoResolveTime": "00:10:00",
    "hybridVMPercentMemoryAutoMitigate": "true",
    "hybridVMDataDiskWriteLatencyTimeAggregation": "Average",
    "hybridVMOSDiskWriteLatencyThreshold": "50",
    "hybridVMOSDiskSpaceAutoResolveTime": "00:10:00",
    "hybridVMDataDiskWriteLatencyDisksToInclude": [
      "*"
    ],
    "hybridVMDisconnectedAlertOperator": "GreaterThan",
    "hybridVMDataDiskReadLatencyDisksToInclude": [
      "*"
    ],
    "hybridVMOSDiskReadLatencyFailingPeriods": "1",
    "hybridVMPercentCPUAutoResolveTime": "00:10:00",
    "hybridVMDataDiskReadLatencyWindowSize": "PT15M",
    "hybridVMDataDiskWriteLatencyAlertSeverity": "2",
    "hybridVMNetworkInAlertSeverity": "2",
    "hybridVMOSDiskReadLatencyDisksToInclude": [
      "C:",
      "/"
    ],
    "hybridVMOSDiskSpaceDisksToInclude": [
      "C:",
      "/"
    ],
    "hybridVMOSDiskSpaceEvaluationPeriods": "1",
    "hybridVMOSDiskWriteLatencyDisksToInclude": [
      "C:",
      "/"
    ],
    "hybridVMOSDiskSpaceOperator": "LessThan",
    "hybridVMHeartBeatRGWindowSize": "PT15M",
    "hybridVMDataDiskSpaceEvaluationPeriods": "1",
    "hybridVMOSDiskSpaceAutoResolve": "true",
    "hybridVMOSDiskWriteLatencyFailingPeriods": "1",
    "hybridVMDataDiskSpaceThreshold": "10",
    "hybridVMOSDiskWriteLatencyComputersToInclude": [
      "*"
    ],
    "hybridVMNetworkOutComputersToInclude": [
      "*"
    ],
    "hybridVMPercentMemoryPolicyEffect": "deployIfNotExists",
    "hybridVMNetworkOutTimeAggregation": "Average",
    "hybridVMDataDiskReadLatencyTimeAggregation": "Average",
    "alzMonitorResourceGroupTags": {
      "Project": "amba-monitoring"
    },
    "hybridVMNetworkInOperator": "GreaterThan",
    "hybridVMPercentMemoryAutoResolve": "true",
    "hybridVMNetworkInComputersToInclude": [
      "*"
    ],
    "hybridVMDataDiskSpaceAlertSeverity": "2",
    "hybridVMOSDiskReadLatencyEvaluationPeriods": "1",
    "hybridVMOSDiskSpaceAlertState": "true",
    "hybridVMNetworkOutAlertSeverity": "2",
    "hybridVMOSDiskWriteLatencyAlertState": "true",
    "hybridVMOSDiskReadLatencyTimeAggregation": "Average",
    "hybridVMOSDiskReadLatencyAutoResolve": "true",
    "hybridVMNetworkInAutoResolve": "true",
    "hybridVMOSDiskWriteLatencyAutoResolve": "true",
    "hybridVMPercentCPUWindowSize": "PT15M",
    "hybridVMDisconnectedAlertSeverity": "1",
    "hybridVMHeartBeatRGAlertState": "true",
    "hybridVMOSDiskSpaceWindowSize": "PT15M",
    "hybridVMNetworkOutAutoResolveTime": "00:10:00",
    "hybridVMPercentMemoryAutoResolveTime": "00:10:00",
    "hybridVMDataDiskReadLatencyThreshold": "30",
    "hybridVMNetworkInPolicyEffect": "deployIfNotExists",
    "hybridVMNetworkInAutoMitigate": "true",
    "hybridVMDataDiskSpaceAlertState": "true",
    "hybridVMNetworkOutAutoResolve": "true",
    "hybridVMOSDiskReadLatencyAlertState": "true",
    "hybridVMDataDiskSpaceOperator": "LessThan",
    "hybridVMNetworkInWindowSize": "PT15M",
    "alzUserAssignedManagedIdentityName": "id-amba-prod-001",
    "hybridVMOSDiskSpaceTimeAggregation": "Average",
    "hybridVMNetworkInTimeAggregation": "Average",
    "hybridVMOSDiskWriteLatencyEvaluationPeriods": "1",
    "hybridVMPercentCPUEvaluationFrequency": "PT5M",
    "hybridVMPercentCPUOperator": "GreaterThan",
    "hybridVMNetworkOutOperator": "GreaterThan",
    "hybridVMDisconnectedAlertFailingPeriods": "1",
    "hybridVMOSDiskReadLatencyComputersToInclude": [
      "*"
    ],
    "hybridVMNetworkOutNetworkInterfaceToInclude": [
      "*"
    ],
    "hybridVMPercentCPUAlertSeverity": "2",
    "hybridVMDataDiskReadLatencyOperator": "LessThan",
    "hybridVMDataDiskSpacePolicyEffect": "deployIfNotExists",
    "hybridVMPercentCPUPolicyEffect": "deployIfNotExists",
    "hybridVMNetworkInNetworkInterfaceToInclude": [
      "*"
    ],
    "hybridVMOSDiskWriteLatencyWindowSize": "PT15M",
    "hybridVMDisconnectedAlertState": "true",
    "hybridVMOSDiskSpaceComputersToInclude": [
      "*"
    ],
    "hybridVMOSDiskWriteLatencyPolicyEffect": "deployIfNotExists",
    "hybridVMHeartBeatRGOperator": "GreaterThan",
    "hybridVMDataDiskReadLatencyAlertSeverity": "2",
    "hybridVMOSDiskWriteLatencyTimeAggregation": "Average",
    "hybridVMDataDiskWriteLatencyEvaluationFrequency": "PT5M",
    "hybridVMNetworkInEvaluationFrequency": "PT5M",
    "hybridVMPercentMemoryTimeAggregation": "Average",
    "hybridVMDataDiskSpaceTimeAggregation": "Average",
    "hybridVMPercentMemoryThreshold": "10",
    "hybridVMHeartBeatRGAlertSeverity": "1",
    "hybridVMDisconnectedAlertEvaluationFrequency": "P1D",
    "hybridVMNetworkInFailingPeriods": "1",
    "hybridVMNetworkOutAlertState": "true",
    "hybridVMOSDiskReadLatencyPolicyEffect": "deployIfNotExists",
    "hybridVMHeartBeatRGTimeAggregation": "Average",
    "hybridVMPercentMemoryOperator": "LessThan",
    "hybridVMOSDiskSpaceThreshold": "10",
    "hybridVMDataDiskWriteLatencyAlertState": "true",
    "hybridVMHeartBeatRGAutoMitigate": "true",
    "hybridVMOSDiskWriteLatencyAutoResolveTime": "00:10:00",
    "hybridVMDataDiskWriteLatencyFailingPeriods": "1",
    "hybridVMDataDiskReadLatencyEvaluationFrequency": "PT5M",
    "hybridVMOSDiskWriteLatencyAutoMitigate": "true",
    "hybridVMNetworkInAlertState": "true",
    "hybridVMPercentMemoryAlertSeverity": "2",
    "hybridVMNetworkOutEvaluationPeriods": "1",
    "hybridVMOSDiskSpaceAutoMitigate": "true",
    "hybridVMPercentMemoryWindowSize": "PT15M",
    "hybridVMDataDiskWriteLatencyThreshold": "30",
    "hybridVMHeartBeatRGAutoResolve": "true",
    "hybridVMDataDiskSpaceAutoResolve": "true",
    "hybridVMDisconnectedAlertTimeAggregation": "Count",
    "hybridVMOSDiskReadLatencyWindowSize": "PT15M",
    "hybridVMNetworkInAutoResolveTime": "00:10:00",
    "hybridVMNetworkOutFailingPeriods": "1",
    "alzMonitorResourceGroupName": "rg-amba-monitoring-001",
    "hybridVMPercentCPUThreshold": "85",
    "hybridVMDisconnectedAlertWindowSize": "P1D",
    "hybridVMDataDiskReadLatencyAutoMitigate": "true",
    "hybridVMOSDiskReadLatencyEvaluationFrequency": "PT5M",
    "hybridVMPercentCPUAutoMitigate": "true",
    "hybridVMDataDiskReadLatencyAutoResolve": "true",
    "hybridVMOSDiskWriteLatencyOperator": "LessThan",
    "hybridVMOSDiskSpaceEvaluationFrequency": "PT5M",
    "hybridVMDataDiskReadLatencyAutoResolveTime": "00:10:00",
    "hybridVMNetworkOutPolicyEffect": "deployIfNotExists",
    "hybridVMDataDiskSpaceAutoResolveTime": "00:10:00",
    "hybridVMOSDiskReadLatencyAutoResolveTime": "00:10:00",
    "hybridVMHeartBeatRGEvaluationFrequency": "PT5M",
    "hybridVMNetworkInEvaluationPeriods": "1",
    "hybridVMOSDiskSpaceFailingPeriods": "1",
    "hybridVMNetworkOutEvaluationFrequency": "PT5M",
    "hybridVMOSDiskWriteLatencyAlertSeverity": "2",
    "alzMonitorResourceGroupLocation": "australiaeast",
    "hybridVMOSDiskReadLatencyOperator": "LessThan",
    "hybridVMDataDiskReadLatencyPolicyEffect": "deployIfNotExists",
    "hybridVMPercentCPUAutoResolve": "true",
    "hybridVMPercentMemoryAlertState": "true",
    "hybridVMNetworkOutAutoMitigate": "true",
    "hybridVMDataDiskReadLatencyAlertState": "true",
    "hybridVMNetworkOutWindowSize": "PT15M",
    "hybridVMOSDiskSpaceAlertSeverity": "2",
    "hybridVMDataDiskWriteLatencyAutoMitigate": "true",
    "hybridVMDataDiskSpaceAutoMitigate": "true",
    "hybridVMDataDiskSpaceDisksToInclude": [
      "*"
    ],
    "hybridVMNetworkInThreshold": "10000000",
    "hybridVMDataDiskWriteLatencyComputersToInclude": [
      "*"
    ],
    "hybridVMDataDiskWriteLatencyWindowSize": "PT15M",
    "hybridVMDataDiskWriteLatencyAutoResolve": "true",
    "hybridVMDataDiskSpaceFailingPeriods": "1",
    "hybridVMOSDiskReadLatencyThreshold": "30",
    "hybridVMDataDiskReadLatencyFailingPeriods": "1",
    "hybridVMDataDiskReadLatencyComputersToInclude": [
      "*"
    ],
    "hybridVMPercentCPUTimeAggregation": "Average",
    "hybridVMHeartBeatRGThreshold": "10",
    "hybridVMDisconnectedAlertDaysThreshold": "45",
    "hybridVMPercentCPUAlertState": "true",
    "alzManagementSubscriptionId": "8cfb2a5f-85a5-48ae-88fe-e11d149f9874"
  },
  "scope": {
    "amba": [
      "/providers/Microsoft.Management/managementGroups/amba-landingzones"
    ]
  }
}